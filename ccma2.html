<html>
  <head>

  </head>
  <body>
    <div style="height: 140px; background-color: red;">This is a sample banner header</div>
    <div style="height: 110px; background-color: rgb(114, 199, 24);">This is a sample banner header</div>
    
    <div style="min-height: 100vh; display: flex; flex-direction: column;">
      <div class="events-container" style="height: fit-content;"></div>

      <script src=https://events.blackthorn.io/embed.js scrolling="no" style="width: 100%; border:none; overflow: hidden;"></script>

<script>
  function resizeIframe() {
    const iframe = document.getElementById('eventFrame');
    if (iframe) {
      iframe.style.height = iframe.contentWindow.document.body.scrollHeight + "px";
    }
  }

  // Listen for iframe load and content changes
  document.getElementById('eventFrame').onload = function() {
    resizeIframe();
    setInterval(resizeIframe, 500); // Periodically check for content changes
  };
</script>

<script>
  let routeChangeCount = 0; // Counter for route changes

  var app = new EventsApp({
    orgId: '0YqMu46',
    path: "/g/6ePn1EctZz?search=&sortBy=date&category=&date=TODAY&keywords=",
    height: '100%',
    width: '100%',
    listeners: [
      {
        event: 'APP_READY',
        handler: function() {
          console.log('APP READY');
        }
      },
      {
        event: 'ROUTE_CHANGED',
        handler: function(params) {
          console.log(params);

          routeChangeCount++; // Increment on each route change

          if (routeChangeCount <= 2) {
            console.log('Ignoring first ROUTE_CHANGED event');
            return; // Ignore the first route change
          }

          // Scroll the page to bring the iframe to the top
          const container = document.querySelector('.content'); 
          if (container) {
            const containerTop = container.getBoundingClientRect().top + window.scrollY;
            window.scrollTo({ top: containerTop, behavior: 'smooth' });

            // Ensure the container fills the viewport
            container.style.height = '100vh';
          }
        }
      },
      {
        event: 'CONTENT_SIZE_CHANGED',
        handler: function(params) {
          console.log("Content size changed:", params);

          // Get the .events-container element
          const container = document.querySelector('.events-container');
          if (container) {
            // Apply the dynamic height
            container.style.height = params.height + 'px';
          }
        }
      },
    ]
  });

  app.mount('.events-container');
</script>

    </div>
    <div fillup style= "height: 90vh; background-color: blue;"></div>

    <script>
      /*
      document.getElementById('btLoader').addEventListener('Route_CHANGED', function() {
        document.querySelector('.content').style.height = 'auto';
    
        // Scroll the parent container to the top
        const parentContainer = document.querySelector('.content'); 
        if (parentContainer) {
          parentContainer.scrollTo({ top: 250, behavior: 'smooth' });
        }
      });*/
    </script>
    

    <div style="height: 500px">This is a sample banner footer</div>
</html>
